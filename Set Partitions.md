## Compositions and Weak Compositions
Suppose we want to divide n *indistinguishable* objects among k *distinct* "bins". The number of ways to do this is called the number of *weak compositions* of n. This reduces to the number of k-tuples $(a_1, a_2, ... a_k)$ of nonnegative integers such that $a_1 + ... + a_k$ = n. Alternatively, if we consider only positive integers (i.e. at least one object in each "bin"), then these are called "compositions". 
### The Number of Compositions and Weak Compositions into k parts 
The number of weak compositions of n into k parts is $\binom{n+k-1}{k-1} = \binom{n+k-1}{n} =$ k multichoose n. Proof: by stars and bars. 

The number of compositions of n into k parts is $\binom{n-1}{k-1}$. Proof: first distribute one object to each of the $k$ bins, leaving $n - k$ objects left to distribute. These can be distributed freely and, by the theorem on weak compositions, there are $\binom{(n-k) + k - 1}{k-1} = \binom{n-1}{k-1}$ ways to do that.
### The total number of compositions of n
Follow-up question: how many compositions of n are there total, i.e. not for any fixed k, but for all possible k? Answer: $2^{n-1}$. Proof: draw n stars in a line; there are n-1 total gaps between adjacent stars. Any composition of n corresponds choosing whether to draw or not draw a line in each one of those gaps; thus there are $2^{n-1}$ outcomes and thus $2^{n-1}$ compositions.

Alternatively: we know that the number of compositions of n into k parts is $\binom{n-1}{k-1}$. We can have k be at least 1 and at most n, so the total compositions summed across all k is $\sum_{k=1}^n\binom{n-1}{k-1} = \sum_k\binom{n-1}{k} = 2^{n-1}$. 

For weak compositions, it doesn't make sense to ask the question, since one can get arbitrarily many weak compositions by adding lots of bins with nothing in them. For compositions, the number of bins is of course bounded above by n.

## Set Partitions
Let S = $[n]$. A collection of nonempty, disjoint sets whose union is $[n]$ is a *partition* of $[n]$. Intuitively, a set partition is a way to divide n distinct objects into indistinguishable, nonempty bins. E.g. $\{\{1, 2, 3\}, \{4\}\}$ is a partition of $[4]$ into 2 "blocks", a "3-block" and a "1-block". There are 7 total partitions of $[4]$ into 2 blocks. An alternate notation for the same would be $134/2$. This is not distinct from $2/134$; to fix a canonical ordering for representing these blocks, order the entries of a block in increasing order within each block, and the blocks themselves by their leading entry. This is called "standard block form". Alternatively, one can write partitions in "canonical form"; if $\sigma$ is a partition then w($\sigma$) (w for word), the canonical form of $\sigma$, is $w_1w_2...w_n$ where $w_i = j$ if $i \in B_j$ where $B_j$ is the jth block in standard block form. For instance the partition $134/2$ would be represented 1121 in canonical form. Thus w defines a function from the set of partitions of n into k blocks onto $[k]^n$, which is the set of n-letter words over the alphabet $[k]$. But there are many words which do not represent valid set partitions.
### Counting set partitions: Stirling numbers of the second kind
Let $P_n$ denote the set of all the partitions of $[n]$, with $\{[n] k\}$ (written vertically like a binomial coefficient) being the set of all partitions into k blocks. Also let S(n, k) (called a "Stirling number of the second kind", or "Stirling set number") denote the number of $[n]$ into k blocks.

Note where triangle numbers show up. 

Some edge cases: S(0, 0) is defined to be 1. We also define S(n, k) to be 0 when k > n or when either of the indices are negative. For n > 0, S(n, 0) = 0. Fill in more later.
### Recurrence relation for Stirling numbers
The numbers S(n, k) follow this recurrence: $S(n, k) = S(n-1, k-1) + kS(n-1, k)$ (which holds as long as $(n, k) \neq (0, 0)$.) Proof: various edge cases are trivial; will prove the case where $1 \leq k \leq n$. Like in the proof of Pascal's identity for binomial coefficients, we choose a "special" element of $[n]$ (say, n) and divide into cases based on where it ends up. Suppose n ends up in a singleton set; then there are n-1 other elements which must be partitioned into k-1 blocks to ensure that n gets partitioned into k blocks. By definition there are $S(n-1, k-1)$ ways to do this. On the other hand, suppose that n is not in a singleton; then we first partition the remaining n-1 elements into k blocks, then choose one of the k blocks to put n in. There are $S(n-1, k)$ ways to do the partition and thus $kS(n-1, k)$ ways to partition then choose where to place n. These two cases are disjoint and exhaustive, so we have $S(n, k) = S(n-1, k-1) + kS(n-1, k)$. 
### Explicit Formula for Stirling numbers
Explicit formula for S(n, k) (to be proved later): let n, k be positive; then $k!*S(n, k) = \sum_j(-1)^j\binom{k}{j}(k-j)^n$. 


### Some Identities With Stirling numbers
Identity: $x^n = \sum_{k=0}^n S(n, k)x^{\underline{k}}$ . (Where $x^\underline{k}$ is x falling factorial k, x(x-1)...(x-k+1).) Proof: assume for now that x is positive. The LHS counts the number of ways to assign n students to x classrooms if rooms are allowed to be empty (if students and rooms are both "labeled") just using the product rule. The RHS counts the same, divided into cases based on the number of nonempty rooms. E.g. if there's one nonempty room, then there are x choices for that nonempty room, and once you've chosen that, only $S(n, 1) = 1$ way to fill that room. If there are two nonempty rooms, then there are S(n, 2) ways to divide the students into 2 blocks (one for each nonempty room), x choices for where the first block goes, and (x-1) for where the second block goes, for $S(n, 2)(x)(x-1)$ total. This generalizes to other numbers of blocks in the obvious way, and then we just sum over all cases to get the RHS. 

Since we proved this for all positive integers x, certainly it is true for more than n x-values. But both sides are polynomials of degree n, so since they are the same at more than n x-values, they must actually be the same polynomial. Thus the identity is true for all real numbers x as well.

N.B. we can also write the RHS as $\sum_{k=0}^n S(n,k)\binom{x}{k}k!$ using the extended definition of binomial coefficients (since $\binom{x}{k}k!$ is just x falling factorial k). 

Another identity: $\sum_{k=m}^n \binom{n}{k} S(k, m) = S(n+1, m+1)$. Proof: RHS counts the partitions of $[n+1]$ into m+1 blocks. LHS does the same in cases, based on the size of the block that contains n+1. For a given k, choose n-k elements to go in the block with n+1, then partition the remaining k elements into m blocks. There are $\binom{n}{n-k} = \binom{n}{k}$ ways to choose that block with n+1 for some fixed k, S(k, m) ways to partition the remaining elements, for $\binom{n}{k}S(k, m)$ ways to do it for some fixed k, and then summing over all k gets you the LHS, and also gets you all the partitions of $[n+1]$ into m+1 blocks (the RHS).

To prove: $\sum_{k=0}^m kS(n+k, k) = S(m+n+1, m)$, where n is a nonnegative integer. Algebraically, start with the recursion $S(n, k) = S(n-1, k-1) + kS(n-1, k)$. So the summand $kS(n+k, k) = S(n+k+1, k)  - S(n+k, k-1)$. Call $S(n+k+1, k)$ $a_k$, so S(n+k, k-1) = $a_{k-1}$. Then we get a telescoping sum in the LHS: $\sum_{k=1}^m a_k - a_{k-1}$. Then everything cancels except $a_0$ and $a_m$, so the sum is $0 + S(m+n+1, m)$. Combinatorially, the RHS counts the partitions of $[m+n+1]$ into m blocks. For concreteness (the generalization will be clear), let m = 7, n = 3, so we have the number of partitions of $[11]$ into 7 blocks. LHS does the same, conditioned on [fill in later]. The last term of the sum is $7 * S(10, 7)$; this counts the number of partitions of $[10]$ into 7 blocks times 7, corresponding to the ways to partition $[10]$ into 7 blocks then pick one of the blocks in which to put 11. $6 * S(9, 6)$ is when you put 11 in a singleton, partition 9 into 6 blocks, then choose one of the 6 in which to put 10. $5 * S(8, 5)$ does the same for when 10 and 11 are singletons; and so on. The last term is when everything 6 and up is in a singleton, you partition $[4]$ into 1 block, then there's only 1 way to put 5 in that block. In general, we "count down" and condition on how many elements from the largest downward are in singletons, then just sum over the disjoint cases. 
### Specific cases of Stirling numbers

### Bell numbers
Another special sort of number that shows up is the "Bell numbers" $b_n$, where the nth Bell number is the total number of partitions of $[n]$ into any number of blocks, $\sum_k S(n, k)$. There is a recurrence for the Bell numbers: $b_{n+1} = \sum_k \binom{n}{k}b_k$. This holds for n>0, with $b_0$ defined to be 1. The proof is basically identical to the proof of the identity with $S(n+1, m+1)$ above. $b_{n+1}$ counts the number of partitions of $[n+1]$. Divide this into cases based on the size of the block containing 1: with a block of size k we can choose $(n + 1) - k - 1 = n - k$ elements from $

