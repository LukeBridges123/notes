# Motivations and Definitions for the Tangent Space
Intuitively, a tangent vector at a given point $p$ in a manifold is a vector attached to $p$ such that, if you walk an infinitesimal step in the direction of that vector, you'll stay on a manifold. There are several equivalent ways to make this concept more precise.
## Tangent Spaces for Embedded Submanifolds
One motivation for the general idea of a tangent space comes from the special case of a submanifold embedded in Euclidean space. Say that $M$ is an $n$-dimensional manifold embedded in $\R^N$. Then about any point $q \in M$ we can consider a parameterization $\phi$ of a neighborhood of $q$ (the inverse of a chart on such a neighborhood) and define the tangent space at $q$, $T_qM$, to be the range of $D\phi$. (This will be some subspace of $\R^N$, since $D\phi$ is a linear map $\R^n \to \R^N$.) One can prove that this does not depend on the choice of parameterization: the idea is to show that, given some $x$ in the range of $D\phi$, with $x = (D\phi)(u)$, for any other parameterization $\psi$, $D\psi$ maps $(D(\psi^{-1}) \circ D\phi)(u)$ to $(D\phi)(u)$. One can then show that $\dim(T_qM) = \dim(M)$. 

## Tangent Vectors as Linear Functionals
A vector $x \in \R^n$ acts on functions $\R^n \to \R$ through the operation of taking directional derivatives. We can define $x \cdot f$ as the directional derivative of $f$ with respect to $x$. This is then linear, $x \cdot (af + bg) = a(x \cdot f) + b(x \cdot g)$, and satisfies the product rule $x \cdot (fg) = (x \cdot f)g + f(x \cdot g)$. 

More abstractly, we can define a "derivation at $p$", where $p \in M$, as a linear map $X: C^\infty(M) \to \R$ (where $C^\infty(M)$ is the algebra of smooth functions $M \to \R$) satisfying the product rule $X(fg) = X(f) \cdot g(p) + f(p) \cdot X(g)$. If $X, Y$ are derivations, then so is any linear combination of them. Thus the set of all derivations at a point $p$ is a vector space, and we can define $T_pM$ to be this vector space. Tangent vectors are elements of these vector spaces. 

### Properties of Derivations
Let $X$ be a derivation. Then we have the following properties, analogous to some properties of derivatives: 

$X(c) = 0$ for any constant function $c$.
If $f, g$ are equal everywhere on some neighborhood of $p$, then $X(f) = X(g)$. (Thus the derivation depends only on "local" properties of $f, g$.)

Proof: The first fact follows purely from the algebraic properties of derivations. We have $X(1) = X(1 \cdot 1) = X(1) \cdot 1 + 1 \cdot X(1) = 2X(1)$. Thus $X(1) = 0$, and for any constant $c$, $X(c) = cX(1) = 0$. 

For the second, we have by linearity that if $f = g$ then $X(f - g) = 0$. Choose a bump function with $\beta(p) = 0$ and $\beta = 1$ outside of the neighborhood $U$ where $f, g$ are equal. We then have $(f - g) = \beta \cdot (f - g)$: outside of $U$, $\beta = 1$, and inside of it, $f - g = 0$, so both sides equal $0$. Then we apply the product rule with $\phi = f - g$: $X(\phi) = X(\beta\phi) = X(\beta)\cdot \phi(p) + \beta(p)X(\phi)$. But $\phi(p) = 0$ and $\beta(p) = 0$, so $X(\phi) = 0$. 

The "localization" property suggests that $X(f)$ should depend only $X(p)$ and the first derivative of $f$ at $p$....

## Tangent Vectors in Local Coordinates
Given $p \in M$, pick local coordinates $x^i$ around $p$; then each smooth function $f$ on $M$ can be identified (locally) with a function $\ol{f}(x^1, \dots, x^n)$, defined by $\ol{f} = f \circ \phi^{-1}$ for the chart $\phi$. This will then be a function around $\ol{p} = \phi(p) \in \R^n$. 

Now, for each of the local coordinates $x_i$, define a map $\frac{\partial}{\partial x_i}|_p: C^\infty(M) \to \R$ by $(\frac{\partial}{\partial x_i}_p)(f) = \frac{\partial \ol{f}}{\partial x_i}|_{\ol{p}}$. This is a derivation, since partial derivatives are linear and satisfy the product rule. Thus these maps are tangent vectors in the sense above. Given the intuition that derivations depend only on first derivatives, we might expect that these are the "only" derivations at $p$, or at least that any derivation can be built out of them. In fact we have the following:

In each local coordinate system $x^i$, the maps $\frac{\partial}{\partial x_i}|_p$ form a basis of $T_pM$ (defined as the vector space of derivations at $p$). Proof: for convenience let $\partial_i = \frac{\partial}{\partial x_i}|_p$. Then we're claiming that, for every derivation $X$, we have $X = \sum_i c^i \partial_i$ where the choice of coefficients $c^i$ is unique. Let $x \in \R^n$ be a point near $\ol{p}$, draw a path $x(t) = p + t(x - p)$  from $p$ to $x$, and apply the fundamental theorem of calculus. For any function $\ol{f}$ we have $\ol{f}(x) = \ol{f}(\ol{p}) + \int_0^1 \frac{d\ol{f}(x(t))}{dt}dt = f(p) + \sum_i \int_0^1 \frac{\partial f}{\partial x_i}\frac{dx^i(t)}{dt} dt$ by the chain rule. Note that each of those time derivatives is just $x^i - p^i$. Thus, back on the manifold $M$, we get $f(x) = f(p) + \sum_{i=1}^n (x^i - p^i)g_i(x)$, where $g_i(x) = \int_0^1 \frac{\partial f}{\partial x_i}|_{x(t)}dt$. These satisfy $g_i(p) = \frac{\partial\ol{f}}{\partial x_i}|_p$. 

Now, for any derivation $X$ at $p$, we have $X(f) = X(f(p) + \sum_i (x^i - p^i)g_i(x)) = X(f(p)) + \sum_i X((x^i - p^i)g_i(x))$. Since $f(p)$ is just some constant, $X(f(p)) = 0$. Meanwhile each term of the sum is equal to $X(x^i - p^i) \cdot g_i(p) + (x^i - p^i)_p (X(g_i))$. The second part of that goes to $0$, since $x_i - p_i$ evaluated at $p$ is $0$. For the first, $X(x^i - p^i)\cdot g_i(p) = X(x^i)\cdot g_i(p) + X(p_i)\cdot g_i(p) = X(x^i)\cdot g_i(p)$, the last inequality following from $X(p_i) = 0$. Thus $X(f) = \sum_i a^i \frac{\partial f}{\partial x_i}|_p$ where $a^i = X(x^i)$, and so $X = \sum_i a_i \frac{\partial}{\partial x_i}|_p$. This shows that the $\partial_i$ span $T_pM$. To show linear independence, suppose $\sum c^i \partial_i = 0$ (i.e. is the zero function). Then....

## Tangent Vectors as Velocity Vectors
We can also think of tangent vectors as "velocity vectors" of "ant tracks", i.e. smooth paths along $M$ passing through $p$. Let $\gamma: (-\epsilon, \epsilon) \to M$ be a smooth path with $\gamma(0) = p$. Then we can define a tangent vector to $\gamma(t)$ at $t = 0$, say $\dot{\gamma_0}$, by $\dot{\gamma_0}(f) = \frac{d}{dt}f(\gamma(t))|_{t=0}$. 

We then have that $\dot{\gamma_0}$ is a tangent vector at $T_pM$, in the sense of being a derivation at $p$, and that any tangent vector is equal to $\dot{\gamma}_0$ for some smooth path $\gamma$ passing through $p$. Proof: in local coordinates $x^i$ in a neighborhood around $p$, we can write $\gamma(t) = (\gamma^1(t), \dots, \gamma^n(t))$ using said coordinates. Then $\dot{\gamma_0}(f) = \frac{d}{dt}\ol{f}(\gamma^1(t), \dots, \gamma^n(t))|_{t=0}$. By the chain rule this becomes $\sum_i \frac{\partial \ol{f}}{\partial x^i}|_p \cdot \frac{d\gamma^i}{dt}|_{t=0}$. We can rewrite this as $(\sum_i c^i \partial_i)(f)$ where $c_i = \frac{d\gamma^i}{dt}|_{t=0}$ and $\partial_i$ is one of those partial differentiation operators defined above. Thus $\dot{\gamma_0}$ is an element of the tangent space, and indeed we have its expansion in the $\partial_i$ basis. 

Conversely, given $(c^1, \dots, c^n) \in \R^n$, set $\gamma(t) = (p^1 + a^1t, \dots, p^n + a^nt)$. Then $\dot{\gamma_0}$ has the expansion above with $c^i = a^i$. Since any tangent vector can be expanded like that, and we now know that any expansion like that can be found as the velocity vector of some path, any tangent vector is the velocity vector of some path. 

# Differentials and Tangent Spaces
## Abstract Definition of a Differential
Let $\phi: M \to N$ be a smooth map between manifolds. Take a point $p \in M$, and let $q = \phi(p)$. $p$ and $q$ will each have their associated tangent spaces, $T_pM$ and $T_qN$, and $\phi$ acts on tangent vectors by "pushing them forward" from $T_pM$ to $T_qN$. That is, we have a map $d\phi_p: T_pM \to T_qN$ associated with any smooth function $\phi$, called the differential of $\phi$ at $p$. 

We can define $d\phi_p$ in terms of derivations: given a derivation $x$, and a function $f$ that $X$ acts on, $d\phi_p(X)$ is the map that acts by $(d\phi_p(X))(f) = X(f \circ \phi)$. We need to check that this is a derivation at $q$. First we need to check that it is linear in $f$: we have $(d\phi_p(X))(af + bg) = X((af + bg) \circ \phi)) = X(af \circ \phi + bg \circ \phi) = aX(f \circ \phi) + bX(g \circ \phi) = a(d\phi_p)(f) + b(d\phi_p)(g)$. We also have the product rule: $X(fg \circ \phi) = X((f \circ \phi)(g \circ \phi))$, and since $X$ is a derivation this satisfies the product rule. 

Now we consider, not $d\phi_p(X)$ for some derivation $X$, but $d\phi_p$ itself. This will turn out to be a linear map (on the space of derivations, i.e. on $T_pM$). We also have that, if $\phi$ is the identity map, then $d\phi_p$ is also the identity map. Differentials obey the chain rule: let $\phi: M \to N, \psi: N \to P$ be smooth maps; then $d(\psi \circ \phi)_p = (d\psi_{\phi(p)}) \circ (d\phi_p)$. Finally, if $\phi$ is a diffeomorphism, then $d(\phi^{-1})_{\phi(p)} = (d\phi_p)^{-1}$. 

Proof: for the first, if $X, Y$ are derivations then $d\phi_p(aX +bY)(f) = (aX + bY)(f \circ \phi) = aX(f\circ \phi) + bY(f \circ \phi)$. The second is similarly clear, and the last follows from applying the chain rule. 

Now we prove the chain rule. Letting $q = \phi(p)$, consider $[(d\psi)_q \circ (d\phi)_p](X)(f)$. Feeding $(d\phi_p)(X)(f)$ into $d\psi_q$ we get $((d\phi_p) \circ X)(f \circ \psi)$, and this in turn equals $X(f \circ (\psi \circ \phi))$. But this is, by definition of the differential, equal to $(d(\psi \circ \phi)X)(f)$. 
## Differentials in Coordinates
Take local coordinates $x^1, \dots, x^n$ around $p$ and $y^1, \dots, y^k$ around $q = \phi(p)$. We know $d\phi_p$ is a linear map between the vector spaces $T_pM$ and $T_qN$. We can therefore write a matrix for $d\phi_p$ using the bases for the tangent spaces that we get from local coordinates: namely the $\frac{\partial}{\partial x_i}|_p$ basis for $T_pM$ and the $\frac{\partial}{\partial y_j}|_q$ basis for $T_qN$. To find this matrix, we look at the action of the differential on each of these derivations: we get $(d\phi_p)(\frac{\partial}{\partial x_i}|_p)(f) = \frac{\partial}{\partial x_i}(f \circ \phi)_p$. Now recall that, in coordinates, $\phi$ is a function with $k$ (=$\dim(N)$) components, $\phi(x^1, \dots, x^n) = (\phi^1(x^1, \dots, x^n), \dots, \phi^k(x^1, \dots, x^n))$. Applying the chain rule for functions in $\R^n$ , we get that this partial derivative equals $\sum_j \frac{\partial f}{\partial y_j}|_q \frac{\partial \phi^j}{\partial x_i}|_p = (\sum_j  (\frac{\partial \phi^j}{\partial x_i}|_p)\frac{\partial f}{\partial y_j}|_q )f$. That is, $(d\phi_p)(\frac{\partial }{\partial x_i}|_q )$ acts on $f$ as a linear combination of the basis vectors for $T_qN$, where the coefficients are given by the partial derivatives of $\phi$--the same partial derivatives that show up in the Jacobian.

## Differentials and Paths
Recall our definition of the tangent space using paths, where each path $\gamma$ on $M$ gives us a derivation by its "velocity vector" $\dot{\gamma_0}$. 

Functions between manifolds push paths forward: $\gamma(t)$ goes to $\phi(\gamma(t)) = (\phi \circ \gamma)(t)$. We can then define $d\phi(\dot{\gamma_0}) = \dot{(\phi \circ \gamma)_0}$, i.e. the velocity vector of this new path. 
# Examples
## Tangent Space to a Vector Space
The tangent space to a finite-dimensional vector space is the vector space itself. This is intuitively plausible when you consider $\R$ as a line embedded in $\R^2$ (in which case the tangent line is the line itself), and $\R^2$ as a plane embedded in $\R^3$ (in which case the tangent plane is the plane itself). More formally, given a vector space $V$, for any point $a \in V$, there exists a canonical isomorphism $V \to T_aV$ such that, for any linear map $L: V \to W$, $dL_a: T_aV \to T_{L(a)}W$ acts in the same way, i.e. letting $I_v, I_w$ be the isomorphisms, $dL_a \circ I_v = I_w \circ L$. (This is expressed in terms of a commutative diagram.) 

The method of the proof is inspired by directional derivatives. We can define these in a coordinate-free way by $Dv|_a(f) = \frac{d}{dt}|_{t=0}f(a+tv)$. We then claim that the map $v \to Dv_a$ is an isomorphism $V \to T_aV$. That $Dv|_a$ is a derivation follows basically from the fact that $\frac{d}{dt}$ is a derivation, so this is indeed a map between $V$ and $T_aV$. We can also show that it is linear as a function of $v$. We can then show that, if $v = \sum_{i=1}^n v^i e_i$, then $Dv|_a(f) = \sum \frac{\partial f}{\partial x^i}(a) v^i$, from there we get injectivity, and by dimension-counting we get surjectivity. Thus $V$ is isomorphic to $T_aV$. 

All that is left is the claim that, under this isomorphism, $dL_a = L$ in the relevant sense. We need to show that $dL_a \circ Dv|_a = D(Lv)_{L(a)}$. For any $f$, applying the left-hand side gets $Dv|_a(f \circ L) = \frac{d}{dt}|_{t=0}(f(L(a + tv))) =\frac{d}{dt}|_{t=0}(f(La + tLv)) = D(Lv)_{La}(f)$, with the second equality following by the linearity of $L$.   
## Tangent Space to the n-Sphere
At any point in the sphere $S^n$, the tangent space $T_p(S^n)$ is the orthogonal complement of $p$, considered as a vector in $\R^{n+1}$. (This is analogous to how, for the 2-sphere, the tangent plane is the set of all vectors orthogonal to the normal vector.) The orthogonal complement of a nonzero vector in an $n+1$-dimensional vector space is an $n$-dimensional vector space, so we get the expected number of dimensions. Because they have the same dimension, we only need to show that one is a subspace of the other, and it will then follow that they are equal. We will prove that any vector orthogonal to $p$ is the velocity vector of some curve on $S^n$. Let $v$ be a unit vector in the orthogonal complement of $p$; as long as all the unit vectors are in the tangent space, so will all vectors in the orthogonal complement. Define a path $\gamma$ by $\gamma(t) = p\cos(t) + v\sin(t)$. Certainly we have $\gamma(0) = p, \gamma'(0) = v$. All we need to do now is show that it lies on the sphere, which will happen as long as $||\gamma(t)||^2 = 1$ for all $t$. We get $||\gamma(t)||^2 = \gamma(t) \cdot \gamma(t) = (p\cos(t) + v\sin(t)) \cdot (p \cos(t) + v\sin(t))$. Expanding this out by bilinearity we get $(p \cdot p)\cos^2(t) + 2(p \cdot v)\cos(t)\sin(t) + (v \cdot v)\sin^2(t)$; the middle term drops out because $v$ is orthogonal to $v$, and since $p \cdot p = v \cdot v = 1$, we're left with $\cos^2(t) + \sin^2(t) = 1$, so $||\gamma(t)||^2 = 1$, as desired. Thus this is a path on the sphere, so any vector in the orthogonal complement of $p$ is a tangent vector. The claim that the orthogonal complement is equal to the tangent space then follows by dimension-counting.
# Tangent Bundles
So far, we have been considering tangent vectors as elements of tangent spaces, attached to each point of the manifold. We don't have a way of bringing these tangent spaces together across the whole manifold.

We can do this by defining the tangent bundle, $TM$, as the (disjoint) union of all tangent spaces, $\cup_p T_pM$. We can project points in the tangent space--since each vector is associated with a single point $p$-- down to their corresponding points. (That is, we have a map $\pi: TM \to M$ with $\pi(v) = p$ where $v \in T_pM$. This is well-defined since the tangent spaces are disjoint.)

The tangent bundle is an example of the general idea of a vector bundle. A smooth vector bundle of rank $n$ on a manifold $M$ is a smooth map $\pi$ from some "larger" manifold $E$ to $M$ such that:

1) for each $p \in M$, $\pi^{-1}(p)$ is a vector space of dimension $n$. (We will use $E_p = \pi^{-1}(p)$ from now on.)
2) Each $p \in M$ has a neighborhood $U$ such that there exists a diffeomorphism $\phi$ such that the diagram below commutes and the restriction of $\phi$ to each $E_p$ is linear. (This condition is called "local triviality".)
Description of diagram: $\pi^{-1}(U)$ has an arrow labeled $\phi$ going to $U \times \R^n$, and an arrow labeled $\pi$ going to $M$. $U \times \R^n$ has an arrow labeled $\pi_1$ going to $M$ (with $\pi_1(u, v) = u$). 

The name "local triviality" comes from considering the "trivial vector bundle" of rank $r$ over $M$, given by $E = M \times \R^r$, with projection map $\pi(u, v) = u$. The condition for general vector bundles says that, about each point, there's a neighborhood such that the projection from the bundle to the manifold looks like the projection from the trivial bundle onto the manifold. 

For more examples, the infinite cylinder $S^1 \times \R$ is what the trivial bundle of rank $1$ on the circle looks like. The Mobius strip can also be considered a vector bundle on $S^1$, but it is not trivial. 
